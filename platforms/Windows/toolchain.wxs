<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Product Id="*" Language="1033" Manufacturer="swift.org" Name="Swift Toolchain for Windows x86_64" UpgradeCode="9871289b-f9cb-4b39-8122-2c7ec1ab24d5" Version="$(var.ProductVersion)">
    <Package Comments="Copyright (c) 2021-2022 Swift Open Source Project" Compressed="yes" Description="Swift Toolchain for Windows x86_64" InstallScope="perMachine" Manufacturer="swift.org" />

    <!--
      NOTE(compnerd) Use high compression as this is an extrodinarily large
      cabinet.  With upstream being amenable to considering decorations for
      DLL builds, this might be possible to reduce in the future hopefully.
      In the mean time, burn the CPU cycles to try to claw back the minimal
      bit of savings to hedge against the constant complaints that the MSIs
      are too large.
    -->
    <Media Id="1" Cabinet="toolchain.cab" EmbedCab="yes" CompressionLevel="high" />

    <?ifdef INCLUDE_DEBUG_INFO ?>
    <Media Id="2" Cabinet="PDBs.clang.cab" />
    <Media Id="3" Cabinet="PDBs.lldb.cab" />
    <Media Id="4" Cabinet="PDBs.llvm.cab" />
    <Media Id="5" Cabinet="PDBs.swift.cab" />
    <Media Id="6" Cabinet="PDBs.SourceKit.cab" />
    <Media Id="7" Cabinet="PDBs.lld.cab" />
    <Media Id="8" Cabinet="PDBs.llbuild.cab" />
    <Media Id="9" Cabinet="PDBs.swift-driver.cab" />
    <Media Id="10" Cabinet="PDBs.ArgumentParser.cab" />
    <Media Id="11" Cabinet="PDBs.ToolsSupportCore.cab" />
    <Media Id="12" Cabinet="PDBs.Yams.cab" />
    <?endif?>

    <!-- Directory Structure -->
    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="INSTALLDIR">
        <Directory Id="Developer" Name="Developer">
          <Directory Id="Toolchains" Name="Toolchains">
            <!-- TODO(compnerd):
              This really should be
              unknown-Asserts-$(var.ProductVersion).xctoolchain,
              though before changing, we should setup a
              `unknown-Asserts-current.xctoolchain`
              symlink. Additionally, beware that the environment chagnes
              below will need to be updated to reflect this change. Ideally,
              we would have as part of this a tool to select the different
              toolchain versions.
            -->
            <Directory Id="unknown-Asserts-VERSION.xctoolchain" Name="unknown-Asserts-development.xctoolchain">
              <Directory Id="_usr" Name="usr">
                <Directory Id="_usr_bin" Name="bin">
                </Directory>
                <Directory Id="_usr_include" Name="include">
                  <Directory Id="_usr_include__InternalSwiftScan" Name="_InternalSwiftScan">
                  </Directory>
                  <Directory Id="_usr_include__InternalSwiftSyntaxParser" Name="_InternalSwiftSyntaxParser">
                  </Directory>
                  <Directory Id="_usr_include_clang_c" Name="clang-c">
                  </Directory>
                  <Directory Id="_usr_include_dispatch" Name="dispatch">
                  </Directory>
                  <Directory Id="_usr_include_indexstore" Name="indexstore">
                  </Directory>
                  <Directory Id="_usr_include_lldb" Name="lldb">
                  </Directory>
                  <Directory Id="_usr_include_llvm_c" Name="llvm-c">
                  </Directory>
                  <Directory Id="_usr_include_os" Name="os">
                  </Directory>
                  <Directory Id="_usr_include_SourceKit" Name="SourceKit">
                  </Directory>
                </Directory>
                <Directory Id="_usr_lib" Name="lib">
                  <Directory Id="_usr_lib_clang" Name="clang">
                  </Directory>
                  <Directory Id="_usr_lib_site_packages" Name="site-packages">
                    <Directory Id="_usr_lib_site_packages_lldb" Name="lldb">
                      <Directory Id="_usr_lib_site_packages_lldb_formatters" Name="formatters">
                        <Directory Id="_usr_lib_site_packages_lldb_formatters_cpp" Name="cpp">
                        </Directory>
                      </Directory>
                      <Directory Id="_usr_lib_site_packages_lldb_utils" Name="utils">
                      </Directory>
                    </Directory>
                  </Directory>
                  <Directory Id="_usr_lib_swift" Name="swift">
                    <Directory Id="_usr_lib_swift_migrator" Name="migrator">
                    </Directory>
                    <Directory Id="_usr_lib_swift_shims" Name="shims">
                    </Directory>
                  </Directory>
                </Directory>
                <Directory Id="_usr_libexec" Name="libexec">
                </Directory>
                <Directory Id="_usr_share" Name="share">
                </Directory>
              </Directory>
            </Directory>
          </Directory>
        </Directory>
      </Directory>
    </Directory>

    <SetDirectory Id="INSTALLDIR" Value="[WindowsVolume]Library">
      NOT INSTALLDIR
    </SetDirectory>

    <!-- Components -->
    <DirectoryRef Id="_usr_bin">
      <Component Id="Toolchain" Guid="d150bdb3-d0f4-4a12-bacf-4dc0b1724d9e">
        <!-- clang -->

        <!-- symlinks -->
        <File Id="clang-cl.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\clang-cl.exe" Checksum="yes" />
        <File Id="clang-cpp.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\clang-cpp.exe" Checksum="yes" />
        <File Id="clang__.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\clang++.exe" Checksum="yes" />
        <!-- /symlinks -->

        <File Id="clang-format.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\clang-format.exe" Checksum="yes" />
        <File Id="clang-tidy.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\clang-tidy.exe" Checksum="yes" />
        <File Id="clang.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\clang.exe" Checksum="yes" />
        <File Id="libclang.dll" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\libclang.dll" Checksum="yes" />
        <File Id="libIndexStore.dll" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\libIndexStore.dll" Checksum="yes" />
        <!-- clang-offload-bundler.exe, clang-refactor.exe, clang-rename.exe, optremarks.dll, scan-build, scan-view -->

        <!-- lld -->

        <!-- symlinks -->
        <File Id="ld.lld.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\ld.lld.exe" Checksum="yes" />
        <File Id="ld64.lld.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\ld64.lld.exe" Checksum="yes" />
        <File Id="lld-link.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\lld-link.exe" Checksum="yes" />
        <File Id="wasm-ld.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\wasm-ld.exe" Checksum="yes" />
        <!-- /symlinks -->

        <File Id="lld.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\lld.exe" Checksum="yes" />

        <!-- lldb -->
        <File Id="lldb-server.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\lldb-server.exe" Checksum="yes" />
        <File Id="lldb-vscode.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\lldb-vscode.exe" Checksum="yes" />
        <File Id="lldb.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\lldb.exe" Checksum="yes" />
        <File Id="liblldb.dll" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\liblldb.dll" Checksum="yes" />
        <File Id="repl_swift.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\repl_swift.exe" Checksum="yes" />
        <!-- lldb-argdumper.exe -->

        <!-- llvm -->

        <!-- symlinks -->
        <!-- addr2line.exe, ar.exe, c++filt.exe, dwp.exe, nm.exe, objcopy.exe, objdump.exe, ranlib.exe, readelf.exe, size.exe, strings.exe -->
        <File Id="llvm-dlltool.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-dlltool.exe" Checksum="yes" />
        <File Id="llvm-lib.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-lib.exe" Checksum="yes" />
        <File Id="lldb-ranlib.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-ranlib.exe" Checksum="yes" />
        <File Id="llvm-readelf.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-readelf.exe" Checksum="yes" />
        <File Id="llvm-strip.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-strip.exe" Checksum="yes" />
        <!-- /symlinks -->

        <File Id="dsymutil.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\dsymutil.exe" Checksum="yes" />
        <File Id="llvm-ar.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-ar.exe" Checksum="yes" />
        <File Id="llvm-cov.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-cov.exe" Checksum="yes" />
        <File Id="llvm-cvtres.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-cvtres.exe" Checksum="yes" />
        <File Id="llvm-cxxfilt.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-cxxfilt.exe" Checksum="yes" />
        <File Id="llvm-dwarfdump.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-dwarfdump.exe" Checksum="yes" />
        <File Id="llvm-dwp.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-dwp.exe" Checksum="yes" />
        <File Id="llvm-lipo.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-lipo.exe" Checksum="yes" />
        <File Id="llvm-mt.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-mt.exe" Checksum="yes" />
        <File Id="llvm-nm.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-nm.exe" Checksum="yes" />
        <File Id="llvm-objcopy.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-objcopy.exe" Checksum="yes" />
        <File Id="llvm-objdump.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-objdump.exe" Checksum="yes" />
        <File Id="llvm-pdbutil.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-pdbutil.exe" Checksum="yes" />
        <File Id="llvm-profdata.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-profdata.exe" Checksum="yes" />
        <File Id="llvm-rc.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-rc.exe" Checksum="yes" />
        <File Id="llvm-readobj.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-readobj.exe" Checksum="yes" />
        <File Id="llvm-size.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-size.exe" Checksum="yes" />
        <File Id="llvm-strings.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-strings.exe" Checksum="yes" />
        <File Id="llvm-symbolizer.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-symbolizer.exe" Checksum="yes" />
        <File Id="llvm-undname.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-undname.exe" Checksum="yes" />
        <File Id="LTO.dll" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\LTO.dll" Checksum="yes" />

        <!-- swift -->

        <!-- symlinks -->
        <File Id="swift-autolink-extract.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\swift-autolink-extract.exe" Checksum="yes" />
        <!-- /symlinks -->

        <File Id="swift-demangle.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\swift-demangle.exe" Checksum="yes" />
        <File Id="swift-frontend.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\swift-frontend.exe" Checksum="yes" />
        <File Id="swiftDemangle.dll" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\swiftDemangle.dll" Checksum="yes" />
        <File Id="_InternalSwiftScan.dll" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\_InternalSwiftScan.dll" Checksum="yes" />
        <File Id="_InternalSwiftSyntaxParser.dll" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\_InternalSwiftSyntaxParser.dll" Checksum="yes" />

        <!-- sourcekit -->
        <File Id="BlocksRuntime.dll" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\BlocksRuntime.dll" Checksum="yes" />
        <File Id="dispatch.dll" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\dispatch.dll" Checksum="yes" />
        <File Id="sourcekitdInProc.dll" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\sourcekitdInProc.dll" Checksum="yes" />

        <!-- non-LLVM build components -->

        <!-- llbuild -->
        <File Id="llbuild.dll" Source="$(var.DEVTOOLS_ROOT)\usr\bin\llbuild.dll" Checksum="yes" />
        <File Id="llbuildSwift.dll" Source="$(var.DEVTOOLS_ROOT)\usr\bin\llbuildSwift.dll" Checksum="yes" />

        <File Id="swift-build-tool.exe" Source="$(var.DEVTOOLS_ROOT)\usr\bin\swift-build-tool.exe" Checksum="yes" />

        <!-- swift-driver -->
        <!-- symlinks -->
        <File Id="swiftc.exe" Name="swiftc.exe" Source="$(var.DEVTOOLS_ROOT)\usr\bin\swift-driver.exe" Checksum="yes" />
        <!-- /symlinks -->

        <File Id="swift.exe" Name="swift.exe" Source="$(var.DEVTOOLS_ROOT)\usr\bin\swift-driver.exe" Checksum="yes" />
        <File Id="swift-help.exe" Source="$(var.DEVTOOLS_ROOT)\usr\bin\swift-help.exe" Checksum="yes" />
        <File Id="swift-build-sdk-interfaces.exe" Source="$(var.DEVTOOLS_ROOT)\usr\bin\swift-build-sdk-interfaces.exe" Checksum="yes" />
        <File Id="SwiftOptions.dll" Source="$(var.DEVTOOLS_ROOT)\usr\bin\SwiftOptions.dll" Checksum="yes" />
        <File Id="SwiftDriver.dll" Source="$(var.DEVTOOLS_ROOT)\usr\bin\SwiftDriver.dll" Checksum="yes" />
        <File Id="SwiftDriverExecution.dll" Source="$(var.DEVTOOLS_ROOT)\usr\bin\SwiftDriverExecution.dll" Checksum="yes" />

        <!-- swift-argument-parser -->
        <File Id="ArgumentParser.dll" Source="$(var.DEVTOOLS_ROOT)\usr\bin\ArgumentParser.dll" Checksum="yes" />
        <File Id="ArgumentParserToolInfo.dll" Source="$(var.DEVTOOLS_ROOT)\usr\bin\ArgumentParserToolInfo.dll" Checksum="yes" />

        <!-- tools-support-core -->
        <File Id="TSCBasic.dll" Source="$(var.DEVTOOLS_ROOT)\usr\bin\TSCBasic.dll" Checksum="yes" />
        <File Id="TSCLibc.dll" Source="$(var.DEVTOOLS_ROOT)\usr\bin\TSCLibc.dll" Checksum="yes" />
        <File Id="TSCUtility.dll" Source="$(var.DEVTOOLS_ROOT)\usr\bin\TSCUtility.dll" Checksum="yes" />

        <!-- Yams -->
        <File Id="Yams.dll" Source="$(var.DEVTOOLS_ROOT)\usr\bin\Yams.dll" Checksum="yes" />
      </Component>

      <?ifdef INCLUDE_DEBUG_INFO ?>
      <Component Id="ToolchainDebugInfo" Guid="b8eab90b-cf24-48c2-b727-e90231ad87be">
        <!-- clang -->
        <File Id="clang-format.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\clang-format.pdb" Checksum="yes" DiskId="2" />
        <File Id="clang-tidy.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\clang-tidy.pdb" Checksum="yes" />
        <File Id="clang.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\clang.pdb" Checksum="yes" DiskId="2" />
        <File Id="libclang.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\libclang.pdb" Checksum="yes" DiskId="2" />
        <File Id="libIndexStore.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\libIndexStore.pdb" Checksum="yes" DiskId="2" />

        <!-- lld -->
        <File Id="lld.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\lld.pdb" Checksum="yes" DiskId="7" />

        <!-- lldb -->
        <File Id="lldb-server.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\lldb-server.pdb" Checksum="yes" DiskId="3" />
        <File Id="lldb-vscode.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\lldb-vscode.pdb" Checksum="yes" DiskId="3" />
        <File Id="lldb.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\lldb.pdb" Checksum="yes" DiskId="3" />
        <File Id="liblldb.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\liblldb.pdb" Checksum="yes" DiskId="3" />

        <!-- llvm -->
        <File Id="dsymutil.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\dsymutil.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-ar.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-ar.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-cov.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-cov.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-cvtres.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-cvtres.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-cxxfilt.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-cxxfilt.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-dwarfdump.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-dwarfdump.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-dwp.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-dwp.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-lipo.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-lipo.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-mt.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-mt.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-nm.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-nm.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-objcopy.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-objcopy.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-objdump.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-objdump.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-pdbutil.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-pdbutil.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-profdata.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-profdata.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-rc.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-rc.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-readobj.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-readobj.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-size.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-size.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-strings.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-strings.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-symbolizer.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-symbolizer.pdb" Checksum="yes" DiskId="4" />
        <File Id="llvm-undname.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\llvm-undname.pdb" Checksum="yes" DiskId="4" />
        <File Id="LTO.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\LTO.pdb" Checksum="yes" DiskId="4" />

        <!-- swift -->
        <File Id="swift-demangle.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\swift-demangle.pdb" Checksum="yes" DiskId="5" />
        <File Id="swift-frontend.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\swift-frontend.pdb" Checksum="yes" DiskId="5" />
        <File Id="swiftDemangle.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\swiftDemangle.pdb" Checksum="yes" DiskId="5" />
        <File Id="_InternalSwiftScan.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\_InternalSwiftScan.pdb" Checksum="yes" DiskId="5" />
        <File Id="_InternalSwiftSyntaxParser.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\_InternalSwiftSyntaxParser.pdb" Checksum="yes" DiskId="5" />

        <!-- sourcekit -->
        <File Id="BlocksRuntime.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\BlocksRuntime.pdb" Checksum="yes" DiskId="6" />
        <File Id="dispatch.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\dispatch.pdb" Checksum="yes" DiskId="6" />
        <File Id="sourcekitdInProc.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\sourcekitdInProc.pdb" Checksum="yes" DiskId="6" />

        <!-- non-LLVM build components -->

        <!-- llbuild -->
        <File Id="llbuild.pdb" Source="$(var.DEVTOOLS_ROOT)\usr\bin\llbuild.pdb" Checksum="yes" DiskId="8" />
        <File Id="llbuildSwift.pdb" Source="$(var.DEVTOOLS_ROOT)\usr\bin\llbuildSwift.pdb" Checksum="yes" DiskId="8" />

        <File Id="swift-build-tool.exe" Source="$(var.DEVTOOLS_ROOT)\usr\bin\swift-build-tool.pdb" Checksum="yes" DiskId="8" />

        <!-- swift-driver -->
        <File Id="swift.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\swift.pdb" Checksum="yes" DiskId="9" />
        <File Id="swift-help.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\swift-help.pdb" Checksum="yes" DiskId="9" />
        <File Id="swift-build-sdk-interfaces.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\swift-build-sdk-interfaces.pdb" Checksum="yes" DiskId="9" />
        <File Id="SwiftOptions.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\SwiftOptions.pdb" Checksum="yes" DiskId="9" />
        <File Id="SwiftDriver.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\SwiftDriver.pdb" Checksum="yes" DiskId="9" />
        <File Id="SwiftDriverExecution.pdb" Source="$(var.TOOLCHAIN_ROOT)\usr\bin\SwiftDriverExecution.pdb" Checksum="yes" DiskId="9" />

        <!-- swift-argument-parser -->
        <File Id="ArgumentParser.pdb" Source="$(var.DEVTOOLS_ROOT)\usr\bin\ArgumentParser.pdb" Checksum="yes" DiskId="10" />
        <File Id="ArgumentParserToolInfo.pdb" Source="$(var.DEVTOOLS_ROOT)\usr\bin\ArgumentParserToolInfo.pdb" Checksum="yes" DiskId="10" />

        <!-- tools-support-core -->
        <File Id="TSCBasic.pdb" Source="$(var.DEVTOOLS_ROOT)\usr\bin\TSCBasic.pdb" Checksum="yes" DiskId="11" />
        <File Id="TSCLibc.pdb" Source="$(var.DEVTOOLS_ROOT)\usr\bin\TSCLibc.pdb" Checksum="yes" DiskId="11" />
        <File Id="TSCUtility.pdb" Source="$(var.DEVTOOLS_ROOT)\usr\bin\TSCUtility.pdb" Checksum="yes" DiskId="11" />

        <!-- Yams -->
        <File Id="Yams.pdb" Source="$(var.DEVTOOLS_ROOT)\usr\bin\Yams.pdb" Checksum="yes" DiskId="12" />
      </Component>
      <?endif?>
    </DirectoryRef>

    <DirectoryRef Id="_usr_lib">
      <Component Id="ToolchainLibraries" Guid="c8c86ead-78b5-49be-815b-7e7d12ba1582">
        <File Id="BlocksRuntime.lib" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\BlocksRuntime.lib" Checksum="yes" />
        <File Id="dispatch.lib" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\dispatch.lib" Checksum="yes" />
        <File Id="libclang.lib" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\libclang.lib" Checksum="yes" />
        <File Id="libIndexStore.lib" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\libIndexStore.lib" Checksum="yes" />
        <File Id="liblldb.lib" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\liblldb.lib" Checksum="yes" />
        <File Id="LTO.lib" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\LTO.lib" Checksum="yes" />
        <File Id="sourcekitdInProc.lib" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\sourcekitdInProc.lib" Checksum="yes" />
        <File Id="swiftDemangle.lib" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swiftDemangle.lib" Checksum="yes" />
        <File Id="_InternalSwiftScan.lib" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\windows\_InternalSwiftScan.lib" Checksum="yes" />
        <File Id="_InternalSwiftSyntaxParser.lib" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\windows\_InternalSwiftSyntaxParser.lib" Checksum="yes" />
      </Component>
    </DirectoryRef>

    <DirectoryRef Id="_usr_lib_site_packages_lldb">
      <Component Id="LLDBPythonScripts" Guid="ab01c50e-3e1f-48d2-ac47-e07978a98aa3">
        <File Id="LLDB___init__.py" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\__init__.py" Checksum="yes" />
        <File Id="_lldb.pyd" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\_lldb.pyd" Checksum="yes" />
        <File Id="embedded_interpreter.py" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\embedded_interpreter.py" Checksum="yes" />
        <File Id="lldb-argdumper.exe" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\lldb-argdumper.exe" Checksum="yes" />
      </Component>
    </DirectoryRef>

    <DirectoryRef Id="_usr_lib_site_packages_lldb_formatters">
      <Component Id="LLDBFormatters" Guid="f8fdf112-c3f1-4e0d-814f-6128c9375869">
        <File Id="logger.py" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\formatters\Logger.py" Checksum="yes" />
        <File Id="LLDBFormatters___init__.py" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\formatters\__init__.py" Checksum="yes" />
        <File Id="attrib_fromdict.py" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\formatters\attrib_fromdict.py" Checksum="yes" />
        <File Id="cache.py" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\formatters\cache.py" Checksum="yes" />
        <File Id="metrics.py" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\formatters\metrics.py" Checksum="yes" />
        <File Id="synth.py" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\formatters\synth.py" Checksum="yes" />
      </Component>
    </DirectoryRef>

    <DirectoryRef Id="_usr_lib_site_packages_lldb_formatters_cpp">
      <Component Id="LLDBFormattersCPP" Guid="68217602-585a-4bfc-8c39-41c4bc1f3969">
        <File Id="LLDBFormattersCPP___init__.py" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\formatters\cpp\__init__.py" Checksum="yes" />
        <File Id="gnu_libstdcpp.py" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\formatters\cpp\gnu_libstdcpp.py" Checksum="yes" />
        <File Id="libcxx.py" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\formatters\cpp\libcxx.py" Checksum="yes" />
      </Component>
    </DirectoryRef>

    <DirectoryRef Id="_usr_lib_site_packages_lldb_utils">
      <Component Id="LLDBUtils" Guid="f1402112-72fd-450a-962c-a0a29ec23278">
        <File Id="LLDBUtils___init__.py" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\utils\__init__.py" Checksum="yes" />
        <File Id="in_call_stack.py" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\utils\in_call_stack.py" Checksum="yes" />
        <File Id="symbolication.py" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\site-packages\lldb\utils\symbolication.py" Checksum="yes" />
      </Component>
    </DirectoryRef>

    <!-- TODO(compnerd): install the block headers from Swift -->
    <!--
    <DirectoryRef Id="_usr_include">
      <Component Id="BlockRuntimeHeaders" Guid="87f18903-e252-41c4-ade9-aeb4819eeebe">
      <File Id="BlocskRuntimeBlock.h" Source="$(var.TOOLCHAIN_ROOT)\usr\include\Block.h" Checksum="yes" />
      </Component>
    </DirectoryRef>
    -->

    <DirectoryRef Id="_usr_include__InternalSwiftScan">
      <Component Id="_InternalSwiftScanHeaders" Guid="d680187a-4f9e-4008-ab79-ab5eeb13fd50">
        <File Id="DependencyScan.h" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\_InternalSwiftScan\DependencyScan.h" Checksum="yes" />
        <File Id="DependencyScanMacros.h" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\_InternalSwiftScan\DependencyScanMacros.h" Checksum="yes" />
        <File Id="_InternalSwiftScan.modulemap" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\_InternalSwiftScan\module.modulemap" Checksum="yes" />
      </Component>
    </DirectoryRef>

    <DirectoryRef Id="_usr_include__InternalSwiftSyntaxParser">
      <Component Id="_InternalSwiftSyntaxParserHeaders" Guid="81ae1aef-7471-4637-b0a2-86b6f9def568">
        <File Id="SwiftSyntaxParser.h" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\_InternalSwiftSyntaxParser\SwiftSyntaxParser.h" Checksum="yes" />
        <File Id="SwiftSyntaxCDataTypes.h" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\_InternalSwiftSyntaxParser\SwiftSyntaxCDataTypes.h" Checksum="yes" />
        <File Id="_InternalSwiftSyntaxParser.modulemap" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\_InternalSwiftSyntaxParser\module.modulemap" Checksum="yes" />
      </Component>
    </DirectoryRef>

    <DirectoryRef Id="_usr_include_clang_c">
      <Component Id="libclangHeader" Guid="3bd9acb2-6d90-4197-afb7-ebec49c4aa75">
        <File Id="BuildSystem.h" Source="$(var.TOOLCHAIN_ROOT)\usr\include\clang-c\BuildSystem.h" Checksum="yes" />
        <File Id="CXCompilationDatabase.h" Source="$(var.TOOLCHAIN_ROOT)\usr\include\clang-c\CXCompilationDatabase.h" Checksum="yes" />
        <File Id="CXErrorCode.h" Source="$(var.TOOLCHAIN_ROOT)\usr\include\clang-c\CXErrorCode.h" Checksum="yes" />
        <File Id="CXString.h" Source="$(var.TOOLCHAIN_ROOT)\usr\include\clang-c\CXString.h" Checksum="yes" />
        <File Id="Documentation.h" Source="$(var.TOOLCHAIN_ROOT)\usr\include\clang-c\Documentation.h" Checksum="yes" />
        <File Id="FatalErrorHandler.h" Source="$(var.TOOLCHAIN_ROOT)\usr\include\clang-c\FatalErrorHandler.h" Checksum="yes" />
        <File Id="Index.h" Source="$(var.TOOLCHAIN_ROOT)\usr\include\clang-c\Index.h" Checksum="yes" />
        <File Id="Platform.h" Source="$(var.TOOLCHAIN_ROOT)\usr\include\clang-c\Platform.h" Checksum="yes" />
        <File Id="Refactor.h" Source="$(var.TOOLCHAIN_ROOT)\usr\include\clang-c\Refactor.h" Checksum="yes" />
      </Component>
    </DirectoryRef>

    <DirectoryRef Id="_usr_include_indexstore">
      <Component Id="IndexStoreHeaders" Guid="a9555162-c45d-404f-aec2-44f7a82ca4fe">
        <File Id="indexstore.h" Source="$(var.TOOLCHAIN_ROOT)\usr\local\include\indexstore\indexstore.h" Checksum="yes" />
        <File Id="IndexStoreCXX.h" Source="$(var.TOOLCHAIN_ROOT)\usr\local\include\indexstore\IndexStoreCXX.h" Checksum="yes" />
      </Component>
    </DirectoryRef>

    <DirectoryRef Id="_usr_include_llvm_c">
      <Component Id="LTOHeaders" Guid="dd5ced9e-e3d5-4bf3-9f47-de0c8ca20720">
        <File Id="lto.h" Source="$(var.TOOLCHAIN_ROOT)\usr\include\llvm-c\lto.h" Checksum="yes" />
      </Component>
    </DirectoryRef>

    <!-- TODO(compnerd): install the dispatch headers from swift -->
    <!--
    <DirectoryRef Id="_usr_include_dispatch">
      <Component Id="DispatchHeaders" Guid="4f9607c6-e517-40a4-9c66-4f76411582ff">
        <File Id="base.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\dispatch\base.h" Checksum="yes" />
        <File Id="dispatch_block.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\dispatch\block.h" Checksum="yes" />
        <File Id="data.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\dispatch\data.h" Checksum="yes" />
        <File Id="dispatch.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\dispatch\dispatch.h" Checksum="yes" />
        <File Id="group.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\dispatch\group.h" Checksum="yes" />
        <File Id="introspection.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\dispatch\introspection.h" Checksum="yes" />
        <File Id="io.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\dispatch\io.h" Checksum="yes" />
        <File Id="dispatch.modulemap" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\dispatch\dispatch.modulemap" Checksum="yes" />
        <File Id="dispatch_object.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\dispatch\object.h" Checksum="yes" />
        <File Id="once.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\dispatch\once.h" Checksum="yes" />
        <File Id="queue.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\dispatch\queue.h" Checksum="yes" />
        <File Id="semaphore.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\dispatch\semaphore.h" Checksum="yes" />
        <File Id="source.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\dispatch\source.h" Checksum="yes" />
        <File Id="time.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\dispatch\time.h" Checksum="yes" />
      </Component>
    </DirectoryRef>

    <DirectoryRef Id="_usr_include_os">
      <Component Id="DispatchOSHeaders" Guid="7b2d5d0e-f4eb-4562-a739-095715347718">
        <File Id="generic_unix_base.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\os\generic_unix_base.h" Checksum="yes" />
        <File Id="generic_win_base.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\os\generic_win_base.h" Checksum="yes" />
        <File Id="os_object.h" Source="$(var.TOOLCHAIN_ROOT)\libdispatch-prefix\include\os\object.h" Checksum="yes" />
      </Component>
    </DirectoryRef>
    -->

    <DirectoryRef Id="_usr_include_SourceKit">
      <Component Id="SourceKitHeaders" Guid="758c7e7c-9214-4fff-bfb6-56cb1aa42e2b">
        <File Id="sourcekitd.h" Source="$(var.TOOLCHAIN_ROOT)\usr\include\SourceKit\sourcekitd.h" Checksum="yes" />
      </Component>
    </DirectoryRef>

    <DirectoryRef Id="_usr_lib_swift_migrator">
      <Component Id="swift-migrator" Guid="0d2c2da1-0634-4b6b-9f15-29f11995cb31">
        <File Id="ios4.json" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\migrator\ios4.json" Checksum="yes" />
        <File Id="ios42.json" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\migrator\ios42.json" Checksum="yes" />
        <File Id="macos4.json" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\migrator\macos4.json" Checksum="yes" />
        <File Id="macos42.json" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\migrator\macos42.json" Checksum="yes" />
        <File Id="overlay4.json" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\migrator\overlay4.json" Checksum="yes" />
        <File Id="overlay42.json" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\migrator\overlay42.json" Checksum="yes" />
        <File Id="tvos4.json" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\migrator\tvos4.json" Checksum="yes" />
        <File Id="tvos42.json" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\migrator\tvos42.json" Checksum="yes" />
        <File Id="watchos4.json" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\migrator\watchos4.json" Checksum="yes" />
        <File Id="watchos42.json" Source="$(var.TOOLCHAIN_ROOT)\usr\lib\swift\migrator\watchos42.json" Checksum="yes" />
      </Component>
    </DirectoryRef>

    <DirectoryRef Id="TARGETDIR">
      <Component Id="EnvironmentVariables" Guid="d01ea5b8-0f8a-4388-9b61-1186efddfc39">
        <Environment Id="DeveloperDir" Action="set" Name="DEVELOPER_DIR" Part="all" Permanent="no" System="yes" Value="[INSTALLDIR]Developer" />
        <Environment Id="Path" Action="set" NamePathPATH" Part="last" Permanent="no" System="yes" Value="[INSTALLDIR]Developer\Toolchains\unknown-Asserts-development.xctoolchain\usr\bin" />
      </Component>
    </DirectoryRef>

    <Feature Id="DeveloperTools" Absent="disallow" AllowAdvertise="yes" ConfigurableDirectory="INSTALLDIR" Description="Swift Toolchain for Windows x86_64" Level="1" Title="Swift Toolchain">
      <ComponentRef Id="Toolchain" />
      <ComponentRef Id="ToolchainLibraries" />
      <!--
      <ComponentRef Id="BlockRuntimeHeaders" />
      -->
      <ComponentRef Id="_InternalSwiftSyntaxParserHeaders" />
      <ComponentRef Id="_InternalSwiftScanHeaders" />
      <ComponentRef Id="IndexStoreHeaders" />
      <ComponentRef Id="libclangHeader" />
      <ComponentRef Id="LTOHeaders" />
      <!--
      <ComponentRef Id="DispatchHeaders" />
      <ComponentRef Id="DispatchOSHeaders" />
      -->
      <ComponentRef Id="SourceKitHeaders" />
      <ComponentRef Id="swift-migrator" />
      <ComponentGroupRef Id="ClangResources" />
      <!--
      <ComponentGroupRef Id="SwiftShims" />
      -->
      <ComponentRef Id="LLDBPythonScripts" />
      <ComponentRef Id="LLDBFormatters" />
      <ComponentRef Id="LLDBFormattersCPP" />
      <ComponentRef Id="LLDBUtils" />

      <ComponentRef Id="EnvironmentVariables" />

      <?ifdef INCLUDE_DEBUG_INFO ?>
      <Feature Id="DebugInfo" Absent="allow" AllowAdvertise="yes" Description="Debug Information for Swift Toolchain for Windows x86_64" Level="0" Title="Debug Information">
        <Condition Level="1">INSTALL_DEBUGINFO</Condition>
        <ComponentRef Id="ToolchainDebugInfo" />
      </Feature>
      <?endif?>
    </Feature>

    <!-- UI -->
    <UI />
  </Product>
</Wix>
